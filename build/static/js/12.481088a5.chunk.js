(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1737:function(e,t,a){},1738:function(e,t,a){},1739:function(e,t,a){},1751:function(e,t,a){"use strict";a.r(t);var r=a(182),n=a(183),c=a(185),o=a(184),i=a(186),s=a(0),l=a.n(s),u=a(140),d=a(528),p=a(1147),f=a(283),m=a(243),h=a(244),v=a(188),b=a(316),y=(a(1737),a(267)),w={labelCol:{span:4},wrapperCol:{span:20}},g={wrapperCol:{offset:8,span:16}},E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).formRef=Object(s.createRef)(),a.onFinish=function(e){var t=e.producer,a=e.producer_key,r=e.url,n=e.location;t=window.account;var c={account:"eosio",name:"regproducer",authorization:[{actor:window.account,permission:"active"}],data:{producer:t,producer_key:a,url:r,location:n}};Object(y.c)(c)},a.state={img:"",isProducer:!0},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){window.account}},{key:"componentDidUpdate",value:function(){this.formRef.current.resetFields()}},{key:"isValidUrl",value:function(e){if(e){return/[a-zA-z]+:\/\/[^\s]*/.test(e)?Promise.resolve():Promise.reject("\u4f60\u7684\u7f51\u5740\u8f93\u5165\u4e0d\u6b63\u786e")}}},{key:"render",value:function(){var e=this.props.Scatter.data,t=(e.accountInfo,e.producers.find(function(e){return e.owner==window.account})),a={};if(t){var r=t.producer_key;"AAA1111111111111111111111111111111114T1Anm"===r&&(r=""),a={producer_key:r,url:t.url,location:t.location}}return console.log("accountInfo",a),l.a.createElement(m.a,Object.assign({},w,{ref:this.formRef,name:"control-ref",onFinish:this.onFinish,initialValues:a}),l.a.createElement("div",{className:"pns"},l.a.createElement(m.a.Item,{shouldUpdate:!0,name:"producer_key",label:"\u77ff\u5de5\u516c\u94a5",rules:[{required:!0},{validator:function(e,t){return b.ecc.isValidPublic(t)?Promise.resolve():Promise.reject("\u516c\u94a5\u4e0d\u5408\u6cd5")}}]},l.a.createElement(h.a,null))),l.a.createElement("div",{className:"pns"},l.a.createElement(m.a.Item,{shouldUpdate:!0,name:"url",label:"url\u5730\u5740",rules:[{required:!0}]},l.a.createElement(h.a,null))),l.a.createElement("div",{className:"pns"},l.a.createElement(m.a.Item,{shouldUpdate:!0,name:"location",label:"\u4f4d\u7f6e",rules:[{required:!0}]},l.a.createElement(h.a,null))),l.a.createElement(m.a.Item,g,l.a.createElement(v.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4")))}}]),t}(s.Component),O=Object(u.c)(function(e){return{Scatter:e.Scatter}},{})(E),j=a(122),k=a.n(j),C=a(206),R=(a(1738),{labelCol:{span:4},wrapperCol:{span:20}}),F={wrapperCol:{offset:8,span:16}},I=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={img:""},a.formRef=Object(s.createRef)(),a.onFinish=function(){var e=Object(C.a)(k.a.mark(function e(t){var a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={account:"eosio",name:"unregprod",authorization:[{actor:window.account,permission:"active"}],data:{producer:window.account}},Object(y.c)(a);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return l.a.createElement(m.a,Object.assign({},R,{ref:this.formRef,name:"control-ref",onFinish:this.onFinish}),l.a.createElement(m.a.Item,F,l.a.createElement(v.a,{type:"primary",htmlType:"submit"},"\u6ce8\u9500")))}}]),t}(s.Component),S=Object(u.c)(function(){return{}},{})(I),V=a(535),K=a(388),N=a(395),P=(a(1739),a(129),{icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"}),x=a(38),A=function(e,t){return s.createElement(x.a,Object.assign({},e,{ref:t,icon:P}))};A.displayName="MinusCircleOutlined";var _=s.forwardRef(A),z=a(715),T=K.a.Option,M={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},D={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},U={labelCol:{span:4},wrapperCol:{span:20}},q={wrapperCol:{offset:8,span:16}},B=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={img:"",list:[],producers:[]},a.formRef=Object(s.createRef)(),a.onFinish=function(){var e=Object(C.a)(k.a.mark(function e(t){var a,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.producers,a.find(function(e){return!e.prod||""==e.prod||!e.pdv})?N.b.error("\u8bf7\u68c0\u67e5\u60a8\u7684\u8f93\u5165"):(r={account:"eosio",name:"voteproducer",authorization:[{actor:window.account,permission:"active"}],data:{voter:window.account,producers:a}},Object(y.c)(r));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.removeVoter=function(){var e=Object(C.a)(k.a.mark(function e(t){var r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a.formRef.current.getFieldsValue().producers.filter(function(e,a){return a!==t}),a.formRef.current.setFieldsValue({producers:r});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){this.formRef.current.resetFields()}},{key:"addProd",value:function(e){var t=this.formRef.current.getFieldsValue().producers,a=t?JSON.parse(JSON.stringify(t)):[];a.push({weight:0,prod:"",pdv:""}),this.formRef.current.setFieldsValue({producers:a})}},{key:"valiName",value:function(e,t){this.props.Scatter.data.accountInfo;var a=this.formRef.current.getFieldsValue().producers;a[t].prod="",a.find(function(t){return t.prod===e})?(N.b.error("\u65e0\u6cd5\u91cd\u590d\u6295\u7968"),this.formRef.current.setFieldsValue({producers:a})):(a[t].prod=e,this.formRef.current.setFieldsValue({producers:a}))}},{key:"render",value:function(){var e=this;console.log(this.props.Scatter);var t=this.props.Scatter.data,a=t.producers,r=t.accountInfo,n=r.voter_info?r.voter_info.detail:[];return console.log("producers,accountInfo",a,r),l.a.createElement(m.a,Object.assign({},U,{ref:this.formRef,name:"control-ref",onFinish:this.onFinish,initialValues:{producers:n}}),l.a.createElement("div",{className:"pns"},l.a.createElement(m.a.List,{name:"producers"},function(t,r){var n=r.add;r.remove;return l.a.createElement("div",null,t.map(function(r,n){var c;return l.a.createElement(m.a.Item,Object.assign({},0===n?M:D,{label:0===n?"\u77ff\u5de5":"",required:!1,key:r.key}),l.a.createElement(m.a.Item,Object.assign({},r,(c={fieldKey:[r.fieldKey,"prod"],name:[r.fieldKey,"prod"],validateTrigger:["onChange","onBlur"]},Object(V.a)(c,"fieldKey",r.fieldKey+"a"),Object(V.a)(c,"label","\u751f\u4ea7\u8005"),Object(V.a)(c,"noStyle",!0),c)),l.a.createElement(K.a,{onChange:function(t){return e.valiName(t,n)},style:{width:"60%",marginRight:8}},a.map(function(e,t){return l.a.createElement(T,{key:t,value:e.owner},e.owner)}))),l.a.createElement(m.a.Item,{style:{display:"none"},fieldKey:[r.fieldKey,"weight"],name:[r.fieldKey,"weight"],label:"\u6743\u91cd",validateTrigger:["onChange","onBlur"],noStyle:!0},l.a.createElement(h.a,{placeholder:"\u6743\u91cdweight",value:0,style:{width:"60%",marginRight:8,display:"none"}})),l.a.createElement(m.a.Item,{fieldKey:[r.fieldKey,"pdv"],name:[r.fieldKey,"pdv"],validateTrigger:["onChange","onBlur"],label:"pdv\u6570\u91cf",noStyle:!0},l.a.createElement(h.a,{placeholder:"pdv\u6570\u91cf",style:{width:"60%",marginRight:8}})),t.length>0?l.a.createElement(_,{style:{marginLeft:"28px"},className:"dynamic-delete-button",onClick:function(){e.removeVoter(r.name)}}):null)}),l.a.createElement(m.a.Item,{style:{marginLeft:"20px"}},l.a.createElement(v.a,{type:"dashed",onClick:function(){e.addProd(n)},style:{width:"60%"}},l.a.createElement(z.a,null)," \u6dfb\u52a0\u77ff\u5de5")))})),l.a.createElement(m.a.Item,q,l.a.createElement(v.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4")))}}]),t}(s.Component),J=Object(u.c)(function(e){return{Scatter:e.Scatter}},{})(B),L=p.a.TabPane,H=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).state={producers:[],isProducer:!1,producer:{}},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchProducer()}},{key:"render",value:function(){var e=this.props.Scatter.data,t=e.accountInfo,a=e.producers;console.log("accountInfo-----",a);var r=a.find(function(e){return e.owner===window.account});return l.a.createElement(d.a,{hidesearch:!0},l.a.createElement("div",{className:"container scatter-container"},l.a.createElement(p.a,{className:"scatter-tabs",defaultActiveKey:"1"},t.voter_info?l.a.createElement(L,{tab:"\u4fee\u6539\u4fe1\u606f",key:"1"},l.a.createElement(O,{producers:this.state.producers,producer:this.state.producer})):l.a.createElement(L,{tab:"\u6ce8\u518c",key:"1"},l.a.createElement(O,{producers:this.state.producers,producer:this.state.producer})),r&&1==r.is_active?l.a.createElement(L,{tab:"\u6ce8\u9500",producers:this.state.producers,key:"2"},l.a.createElement(S,null)):l.a.createElement(L,{tab:"\u6ce8\u9500",disabled:!0,key:"2"},l.a.createElement(S,null)),l.a.createElement(L,{tab:"\u6295\u7968",key:"3"},l.a.createElement(J,{producers:this.state.producers}))),","))}}]),t}(s.Component);t.default=Object(u.c)(function(e){return{Scatter:e.Scatter}},{fetchProducer:f.e,fetchAccount:f.c})(H)}}]);